<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Guess the Number Dashboard</title>
<style>
    body {
        background: #f4f7fb;
        font-family: 'Segoe UI', Arial, sans-serif;
        margin: 0;
        padding: 0;
    }

    /* === Full-width banner === */
    .banner-wrapper {
        width: 100%;
        margin: 0;
        padding: 0;
    }
    .banner-wrapper img {
        width: 100%;
        height: 300px; /* Banner height fixed */
        object-fit: cover;
        display: block;
    }
    .banner-heading {
        text-align: center;
        padding: 15px 0;
        background: linear-gradient(90deg, #6a11cb, #33025d); /* Banner-style gradient behind heading */
    }
    .banner-heading h1 {
        font-size: 2.4rem;
        font-weight: 700;
        margin: 0;
        color: #fff;
        text-shadow: 0 2px 6px rgba(0,0,0,0.3);
    }

    /* === Dashboard layout using CSS Grid === */
    .dashboard {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        grid-template-rows: auto auto;
        gap: 22px;
        max-width: 1100px;
        margin: 20px auto;
    }

    /* Assign cards to grid positions */
    .card.instructions { grid-column: 1 / 2; grid-row: 1 / 2; }
    .card.start-game { grid-column: 2 / 3; grid-row: 1 / 2; }
    .card.dashboard-stats { grid-column: 1 / 2; grid-row: 2 / 3; }
    .card.history { grid-column: 2 / 3; grid-row: 2 / 3; }
    .card.graph { grid-column: 3 / 4; grid-row: 1 / 3; }

    /* === Card Styling to match banner colors === */
    .card {
        background: linear-gradient(180deg, #ffffff 0%, #f0f4ff 100%);
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(37,117,252,0.15);
        padding: 26px 20px;
        display: flex;
        flex-direction: column;
        border-top: 4px solid #33025d;
    }
    .card h3 {
        color: #33025d;
    }

    /* Flashcard button */
    .flashcard {
        background: #33025d;
        color: #fff;
        border-radius: 10px;
        padding: 15px 0;
        text-align: center;
        font-weight: bold;
        cursor: pointer;
        margin-bottom: 5px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        transition: background 0.3s;
    }
    .flashcard:hover {
        background: #33025d;
    }

    /* Form elements */
    input[type="number"] {
        padding: 8px;
        border-radius: 4px;
        border: 1px solid #bcd;
        width: 70px;
        font-size: 1rem;
    }
    button {
        padding: 9px 20px;
        border-radius: 5px;
        background: #33025d;
        color: #fff;
        border: none;
        margin: 7px 2px;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.3s;
    }
    button.reveal {
        background: #43a047;
    }
    button:hover { background: #33025d; }
    button.reveal:hover { background: #357a38; }

    /* Messages & Table */
    .message { margin-top: 11px; font-weight: bold; }
    .history-table, .history-table th, .history-table td {
        border-collapse: collapse;
        border: 1px solid #eee;
        padding: 7px;
        text-align: center;
    }
</style>
<!-- Google Charts Loader -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>
<body>

<!-- Full-width Banner -->
<div class="banner-wrapper">
    <img src="banner.jpg" alt="Banner">
</div>
<div class="banner-heading">
    <h1>üéØ Guess the Number</h1>
</div>

<div class="dashboard">
    <!-- Instructions Card -->
    <div class="card instructions">
        <h3>Instructions</h3>
        <ul>
            <li>System picks a number (1 to 100).</li>
            <li>You get <b>7 attempts</b> per round.</li>
            <li>Score more for fewer guesses!</li>
            <li>Check history, reveal answer any time.</li>
        </ul>
    </div>

    <!-- Start Game Card -->
    <div class="card start-game" id="startCard">
        <div class="flashcard" onclick="startGame()">üëâ Start Now! üëà</div>
        <div id="gameControls" style="display:none;">
            <label>Your guess:</label>
            <input type="number" id="guessInput" min="1" max="100" />
            <button onclick="makeGuess()">Guess</button>
            <button class="reveal" onclick="revealNumber()">Reveal</button>
            <button onclick="restartGame()">Restart</button>
            <div class="message" id="message"></div>
        </div>
    </div>

    <!-- Game Dashboard Card -->
    <div class="card dashboard-stats">
        <h3>Game Dashboard</h3>
        <table>
            <tr><td>Attempts left:</td><td id="attemptsLeft">7</td></tr>
            <tr><td>Score:</td><td id="score">0</td></tr>
        </table>
    </div>

    <!-- History Card -->
    <div class="card history">
        <h3>Guess History</h3>
        <table class="history-table" style="width:100%;">
            <thead><tr><th>Attempt</th><th>Guess</th><th>Result</th></tr></thead>
            <tbody id="historyBody"></tbody>
        </table>
    </div>

    <!-- Attempts Graph Card -->
    <div class="card graph">
        <h3>Attempts Graph</h3>
        <div id="chart_div" style="width: 100%; height: 100%; min-height: 400px;"></div>
    </div>
</div>

<script>
let randomNumber, attemptsLeft, score = 0, history = [], revealed = false;

function startGame() {
    document.querySelector('.flashcard').style.display = "none";
    document.getElementById("gameControls").style.display = "block";
    resetRound();
}

function resetRound() {
    randomNumber = Math.floor(Math.random() * 100) + 1;
    attemptsLeft = 7;
    history = [];
    revealed = false;
    document.getElementById("attemptsLeft").textContent = attemptsLeft;
    document.getElementById("score").textContent = score;
    document.getElementById("message").textContent = "";
    document.getElementById("guessInput").value = "";
    updateHistory();
    drawChart();
}

function makeGuess() {
    let guess = Number(document.getElementById("guessInput").value);
    if (!guess || guess < 1 || guess > 100) {
        document.getElementById("message").textContent = "‚ö†Ô∏è Enter number 1-100.";
        return;
    }
    attemptsLeft--;
    document.getElementById("attemptsLeft").textContent = attemptsLeft;
    let feedback;
    if (guess === randomNumber) {
        let points = attemptsLeft + 1;
        score += points;
        document.getElementById("score").textContent = score;
        feedback = `‚úÖ Correct! +${points} pts!`;
        revealed = true;
        history.push({ attempt: 8 - attemptsLeft, guess, result: "Correct" });
        document.getElementById("message").textContent = feedback;
        updateHistory(); drawChart();
        setTimeout(resetRound, 1500);
        return;
    } else if (guess < randomNumber) {
        feedback = "üìâ Too low!";
    } else {
        feedback = "üìà Too high!";
    }
    history.push({ attempt: 8 - attemptsLeft, guess, result: feedback });
    updateHistory(); drawChart();
    document.getElementById("message").textContent = feedback;
    if (attemptsLeft <= 0 && !revealed) {
        document.getElementById("message").textContent = `‚ùå Out! Number was ${randomNumber}.`;
        revealed = true;
        history.push({ attempt: "-", guess: "-", result: `Num: ${randomNumber}` });
        updateHistory(); drawChart();
        setTimeout(resetRound, 1800);
    }
}

function revealNumber() {
    if (!revealed) {
        document.getElementById("message").textContent = `‚ÑπÔ∏è Number: ${randomNumber}`;
        history.push({ attempt: "-", guess: "-", result: `Revealed: ${randomNumber}` });
        updateHistory(); drawChart();
        revealed = true;
    }
}
function restartGame() {
    score = 0;
    document.getElementById("score").textContent = score;
    document.querySelector('.flashcard').style.display = "block";
    document.getElementById("gameControls").style.display = "none";
    document.getElementById("historyBody").innerHTML = "";
    document.getElementById("message").textContent = "";
    drawChart();
}
function updateHistory() {
    let tbody = document.getElementById("historyBody");
    tbody.innerHTML = "";
    for (let h of history) {
        let tr = document.createElement("tr");
        tr.innerHTML = `<td>${h.attempt}</td><td>${h.guess}</td><td>${h.result}</td>`;
        tbody.appendChild(tr);
    }
}
function drawChart() {
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(function() {
        let data = new google.visualization.DataTable();
        data.addColumn('number', 'Attempt');
        data.addColumn('number', 'Guess');
        let chartData = history.filter(h => h.attempt !== '-' && typeof h.guess === "number")
                               .map(h => [h.attempt, h.guess]);
        if(chartData.length) data.addRows(chartData);
        let options = {
            title: 'Guess Progress',
            hAxis: { title: 'Attempt #' },
            vAxis: { title: 'Guess' },
            legend:'none',
            colors:['#2575fc']
        };
        let chart = new google.visualization.LineChart(document.getElementById('chart_div'));
        chart.draw(data, options);
    });
}
drawChart();
</script>
</body>
</html>
